# Use the latest Amazon Linux 2023 as the base image
FROM dockerhubdevopsrv/python-base:latest

COPY . .
RUN pip install --upgrade pip && \
    pip install -r ./src/requirements.txt -t ./src

# Expose the application port
EXPOSE 8080

# Change ownership to the non-root user
RUN chown -R rvapp:rvapp /opt/app

# Switch to the non-root user
USER rvapp

# Run the application
CMD ["python", "./src/app.py"]